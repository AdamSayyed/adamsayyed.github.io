<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kernel-Level Producer-Consumer | Adam Sayyed</title>
    <meta name="description" content="Details of the Kernel-Level Producer-Consumer project by Adam Sayyed.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Outfit:wght@500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="profile-section">
                <a href="index.html" style="text-decoration: none; color: inherit;">
                    <img src="assets/profile.png" alt="Adam Sayyed" class="profile-img">
                    <h1 class="profile-name">Adam Sayyed</h1>
                </a>
                <p class="profile-pronouns">he/him</p>
                <p class="profile-title">Software & ML Engineer | B.S. Computer Science @ UMBC</p>

                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Maryland, USA</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-university"></i>
                        <span>UMBC</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:adam.a.sayyed@gmail.com">Email</a>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-github"></i>
                        <a href="https://github.com/AdamSayyed" target="_blank">Github</a>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-linkedin"></i>
                        <a href="https://linkedin.com/in/adamsayyed" target="_blank">LinkedIn</a>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-file-pdf"></i>
                        <a href="assets/AdamSayyed_Resume.pdf" target="_blank">Resume</a>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="logo-row">
                    <!-- Placeholders for logos if needed, or just keep it clean -->
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <nav class="top-nav">
                <a href="index.html" class="nav-logo">Adam Sayyed</a>
                <ul class="nav-links">
                    <li><a href="index.html#projects">Back to Projects</a></li>
                    <li><a href="index.html">Home</a></li>
                </ul>
            </nav>

            <div class="content-wrapper">
                <section class="content-section">
                    <a href="index.html#projects"
                        style="display: inline-block; margin-bottom: 1.5rem; color: var(--accent-primary); font-weight: 500;"><i
                            class="fas fa-arrow-left"></i> Back to Projects</a>

                    <h1 class="section-heading" style="display: block; border: none; margin-bottom: 0.5rem;">
                        Kernel-Level Producer-Consumer System</h1>
                    <p class="tech-stack" style="margin-bottom: 3rem; font-size: 1.1rem;">Kernel-Space
                        Multithreading &
                        Synchronization</p>

                    <div class="project-details">
                        <h3>Project Overview</h3>
                        <p>Developed a kernel-space IPC system that implements a producer-consumer workflow
                            with
                            multiple threads and system calls. The project extends user-space threading
                            concepts into
                            the Linux kernel, providing hands-on experience with kernel programming,
                            synchronization
                            primitives, and low-level memory and file management. The system handles book
                            inventory
                            requests from a producer thread, processes them in consumer threads, and
                            generates a
                            consolidated report using an auditor thread.</p>

                        <h3>Key Objectives</h3>
                        <ul class="simple-list">
                            <li><strong>Implement thread-safe data structures</strong> in kernel space using
                                semaphores
                                and mutexes.</li>
                            <li><strong>Map user-space threading concepts</strong> to kernel-space system
                                calls.</li>
                            <li><strong>Simulate real-world producer-consumer operations</strong> with
                                randomized
                                processing times.</li>
                            <li><strong>Generate structured logging</strong> for both producers and
                                consumers, along
                                with an end-of-run auditor report.</li>
                        </ul>

                        <h3>Technical Implementation</h3>

                        <h4>Circular Buffer (Kernel-Space Message Queue)</h4>
                        <ul class="simple-list">
                            <li>Implemented a 20-slot circular buffer for communication between producer and
                                consumer
                                threads.</li>
                            <li>Synchronized access with kernel semaphores (struct semaphore) and mutexes
                                (struct
                                mutex).</li>
                            <li>empty and full semaphores prevent overflows and underflows, ensuring robust
                                message
                                passing.</li>
                        </ul>

                        <h4>Inventory Array</h4>
                        <ul class="simple-list">
                            <li>Implemented a 35-slot inventory array, each representing a unique Book ID
                                (0–34).</li>
                            <li>Each slot has its own mutex to allow thread-safe concurrent access by
                                multiple
                                consumers.</li>
                            <li>Consumers increment book counts and store the book structs in the
                                appropriate inventory
                                slot.</li>
                        </ul>

                        <h4>Producer Thread (System Call)</h4>
                        <ul class="simple-list">
                            <li>Reads book entries from input.txt, parses into book structs, and inserts
                                them into the
                                circular buffer.</li>
                            <li>Simulates real-world variability by sleeping for randomized time intervals
                                using
                                fsleep().</li>
                            <li>Logs all produced entries with timestamps to producer_log.txt.</li>
                        </ul>

                        <h4>Consumer Thread (System Call)</h4>
                        <ul class="simple-list">
                            <li>Continuously checks the circular buffer for new books.</li>
                            <li>Removes entries and updates the inventory array according to the Book ID and
                                priority.
                            </li>
                            <li>Synchronization ensures safe access to shared buffer and inventory data.
                            </li>
                            <li>Logs each action to output_log.txt and prints status messages to the kernel
                                using
                                printk().</li>
                        </ul>

                        <h4>Auditor Thread (System Call)</h4>
                        <ul class="simple-list">
                            <li>Triggered once all consumer threads complete.</li>
                            <li>Iterates through the inventory array to generate a final report segmented by
                                priority
                                levels (0–2).</li>
                            <li>Produces a neatly formatted summary listing book counts by ID and priority
                                in
                                output_log.txt.</li>
                        </ul>

                        <h3>Kernel-Space Adaptations</h3>
                        <ul class="simple-list">
                            <li>Replaced user-space constructs with kernel equivalents:
                                <ul>
                                    <li>pthread_mutex_t → struct mutex</li>
                                    <li>sem_t → struct semaphore</li>
                                    <li>time_t → struct timespec64</li>
                                </ul>
                            </li>
                            <li>Used kernel memory allocation (kmalloc, kfree) instead of malloc.</li>
                            <li>Replaced standard I/O with kernel functions (filp_open, kernel_read) and
                                logging via
                                printk().</li>
                            <li>Replaced random number generation with get_random_bytes().</li>
                        </ul>

                        <h3>Thread Mapping & Execution Flow</h3>
                        <ul class="simple-list">
                            <li>Each pthread in user space maps directly to a kernel thread, allowing
                                producer,
                                consumer, and auditor threads to execute system calls concurrently.</li>
                            <li>Producer and consumer threads operate in parallel, while the auditor waits
                                until all
                                consumers finish to summarize results.</li>
                            <li>Proper synchronization guarantees no race conditions, deadlocks, or data
                                corruption.
                            </li>
                        </ul>

                        <h3>Challenges & Solutions</h3>
                        <ul class="simple-list">
                            <li><strong>Kernel Debugging</strong>: Implementing and testing system calls
                                required full
                                kernel rebuilds and reboots.</li>
                            <li><strong>Thread Synchronization</strong>: Ensured safe concurrent access to
                                shared data
                                structures using kernel semaphores and mutexes.</li>
                            <li><strong>Randomized Delays</strong>: Modeled realistic production and
                                consumption timing
                                without breaking synchronization.</li>
                            <li><strong>File I/O in Kernel</strong>: Transitioned from user-space file
                                functions to
                                kernel equivalents, managing file handles and offsets safely.</li>
                        </ul>

                        <h3>Project Outcome</h3>
                        <ul class="simple-list">
                            <li>Successfully implemented a fully functional kernel-space producer-consumer
                                system with
                                auditor reporting.</li>
                            <li>Gained hands-on experience with kernel synchronization, system call
                                implementation, and
                                memory-safe logging in a concurrent environment.</li>
                            <li>Demonstrated ability to translate user-space multithreaded designs into
                                kernel-level
                                implementations.</li>
                        </ul>
                    </div>
                </section>
            </div>

            <footer>
                <p>&copy; 2024 Adam Sayyed.</p>
            </footer>
        </main>
    </div>

    <script src="script.js"></script>
</body>

</html>